# 필드 규격 정책

이 문서는 React OMS의 모든 데이터 필드에 대한 규격과 제약사항을 정의합니다.

## 📦 상품 데이터 필드 규격

### 기본 정보 필드

#### 상품명 (name)
| 속성 | 값 |
|------|-----|
| **필드명** | `name` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **최소길이** | 2자 |
| **최대길이** | 100자 |
| **허용문자** | 한글, 영문, 숫자, 공백, 특수문자 `()[]{},-./` |
| **금지문자** | `<>'"&\|` |
| **예시** | `프리미엄 코튼 티셔츠 (화이트)` |

!!! warning "주의사항"
    - HTML 태그는 자동으로 제거됩니다
    - 연속된 공백은 하나로 통합됩니다
    - 앞뒤 공백은 자동으로 제거됩니다

#### 상품 ID (id)
| 속성 | 값 |
|------|-----|
| **필드명** | `id` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 (자동 생성) |
| **형식** | `PRD-YYYYMMDD-XXXXXX` |
| **길이** | 17자 (고정) |
| **생성규칙** | `PRD-` + `날짜(8자)` + `-` + `순번(6자)` |
| **예시** | `PRD-20240115-000001` |

#### 카테고리 (category)
| 속성 | 값 |
|------|-----|
| **필드명** | `category` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **형식** | 계층형 경로 (`>` 구분자) |
| **최대깊이** | 5단계 |
| **각단계길이** | 1~20자 |
| **예시** | `의류 > 상의 > 티셔츠 > 기본티` |

#### 브랜드 (brand)
| 속성 | 값 |
|------|-----|
| **필드명** | `brand` |
| **타입** | `string` |
| **필수여부** | ⚪ 선택 |
| **최소길이** | 1자 |
| **최대길이** | 50자 |
| **허용문자** | 한글, 영문, 숫자, 공백, `-`, `&` |
| **예시** | `베이직웨어`, `Nike & Co.` |

### 가격 정보 필드

#### 판매가격 (price)
| 속성 | 값 |
|------|-----|
| **필드명** | `price` |
| **타입** | `number` (정수) |
| **필수여부** | ✅ 필수 |
| **최솟값** | 100원 |
| **최댓값** | 99,999,999원 |
| **단위** | 원 (KRW) |
| **입력형식** | 숫자만 입력, 콤마 자동 생성 |
| **예시** | `29000` → 표시: `29,000원` |

#### 원가 (originalPrice)
| 속성 | 값 |
|------|-----|
| **필드명** | `originalPrice` |
| **타입** | `number` (정수) |
| **필수여부** | ⚪ 선택 |
| **제약조건** | `판매가격 ≤ 원가` |
| **최솟값** | 0원 |
| **최댓값** | 99,999,999원 |

#### 할인율 (discountRate)
| 속성 | 값 |
|------|-----|
| **필드명** | `discountRate` |
| **타입** | `number` (소수) |
| **필수여부** | ⚪ 선택 |
| **최솟값** | 0% |
| **최댓값** | 90% |
| **소수점** | 2자리까지 |
| **계산공식** | `(원가 - 판매가격) / 원가 × 100` |

### 재고 정보 필드

#### 재고수량 (stock)
| 속성 | 값 |
|------|-----|
| **필드명** | `stock` |
| **타입** | `number` (정수) |
| **필수여부** | ✅ 필수 |
| **최솟값** | 0개 |
| **최댓값** | 999,999개 |
| **기본값** | 0 |

#### 안전재고 (safetyStock)
| 속성 | 값 |
|------|-----|
| **필드명** | `safetyStock` |
| **타입** | `number` (정수) |
| **필수여부** | ⚪ 선택 |
| **최솟값** | 0개 |
| **최댓값** | 999개 |
| **기본값** | 10 |

### 상태 필드

#### 상품상태 (status)
| 속성 | 값 |
|------|-----|
| **필드명** | `status` |
| **타입** | `enum` |
| **필수여부** | ✅ 필수 |
| **허용값** | `active`, `inactive`, `sold_out`, `discontinued` |
| **기본값** | `active` |

**상태별 의미:**

=== "active"
    - 판매 중인 상품
    - 고객에게 노출됨
    - 주문 가능

=== "inactive"
    - 일시적으로 판매 중단
    - 고객에게 미노출
    - 주문 불가능

=== "sold_out"
    - 재고 소진
    - 고객에게 노출 (품절 표시)
    - 주문 불가능

=== "discontinued"
    - 단종된 상품
    - 고객에게 미노출
    - 영구적 판매 중단

### 설명 및 이미지 필드

#### 상품설명 (description)
| 속성 | 값 |
|------|-----|
| **필드명** | `description` |
| **타입** | `text` |
| **필수여부** | ⚪ 선택 |
| **최소길이** | 10자 |
| **최대길이** | 2000자 |
| **허용태그** | `<p>`, `<br>`, `<strong>`, `<em>`, `<ul>`, `<ol>`, `<li>` |
| **금지태그** | `<script>`, `<iframe>`, `<object>` |

#### 상품이미지 (images)
| 속성 | 값 |
|------|-----|
| **필드명** | `images` |
| **타입** | `array[string]` |
| **필수여부** | ⚪ 선택 |
| **최소개수** | 0개 |
| **최대개수** | 10개 |
| **파일형식** | `jpg`, `jpeg`, `png`, `webp` |
| **최대크기** | 5MB/파일 |
| **권장해상도** | 800×800px 이상 |

## 🗂️ 카테고리 데이터 필드 규격

### 기본 정보

#### 카테고리명 (name)
| 속성 | 값 |
|------|-----|
| **필드명** | `name` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **최소길이** | 1자 |
| **최대길이** | 20자 |
| **허용문자** | 한글, 영문, 숫자 |
| **금지문자** | 특수문자 `>`, `<`, `/`, `\` |

#### 카테고리 경로 (path)
| 속성 | 값 |
|------|-----|
| **필드명** | `path` |
| **타입** | `array[string]` |
| **필수여부** | ✅ 필수 (자동 생성) |
| **최대깊이** | 5단계 |
| **생성규칙** | 부모 경로 + 현재 카테고리명 |

#### 표시순서 (displayOrder)
| 속성 | 값 |
|------|-----|
| **필드명** | `displayOrder` |
| **타입** | `number` (정수) |
| **필수여부** | ✅ 필수 |
| **최솟값** | 1 |
| **최댓값** | 9999 |
| **기본값** | 1 |

## 🏪 쇼핑몰 연동 필드 규격

### 채널 정보

#### 쇼핑몰 ID (mallId)
| 속성 | 값 |
|------|-----|
| **필드명** | `mallId` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **허용값** | `naver`, `coupang`, `gmarket`, `11st` |
| **형식** | 소문자 영문 |

#### 연동상태 (connectionStatus)
| 속성 | 값 |
|------|-----|
| **필드명** | `connectionStatus` |
| **타입** | `enum` |
| **필수여부** | ✅ 필수 |
| **허용값** | `connected`, `disconnected`, `error`, `syncing` |
| **기본값** | `disconnected` |

## 🔌 외부 API 필드 규격

### API 인증 정보

#### API 키 (apiKey)
| 속성 | 값 |
|------|-----|
| **필드명** | `apiKey` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **최소길이** | 20자 |
| **최대길이** | 200자 |
| **형식** | 영문, 숫자, `-`, `_` |
| **보안** | 암호화 저장 |

#### 플랫폼 ID (platformId)
| 속성 | 값 |
|------|-----|
| **필드명** | `platformId` |
| **타입** | `string` |
| **필수여부** | ✅ 필수 |
| **허용값** | `cafe24`, `wemall`, `makeshop`, `godo5`, `naver_commerce` |

## ✅ 검증 규칙

### 공통 검증 규칙

1. **필수 필드 검증**: 모든 필수 필드는 값이 있어야 함
2. **길이 검증**: 최소/최대 길이 범위 내에서만 허용
3. **타입 검증**: 정의된 타입과 일치해야 함
4. **형식 검증**: 정규식 패턴에 맞아야 함
5. **값 범위 검증**: 최솟값/최댓값 범위 내에서만 허용

### 비즈니스 규칙 검증

1. **가격 관계**: `판매가격 ≤ 원가`
2. **재고 일관성**: `재고수량 ≥ 0`
3. **카테고리 깊이**: `최대 5단계까지만 허용`
4. **이미지 크기**: `파일당 5MB 이하`
5. **상태 전환**: 유효한 상태 전환만 허용

!!! danger "중요한 제약사항"
    - 상품 삭제는 실제 삭제가 아닌 상태 변경(`discontinued`)으로 처리
    - 카테고리 삭제 시 하위 카테고리와 상품 확인 필요
    - API 키는 암호화되어 저장되며 평문으로 조회 불가
    - 외부 API 연동 시 플랫폼별 추가 제약사항 적용
