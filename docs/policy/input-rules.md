# 입력 규칙 정책

이 문서는 React OMS에서 데이터 입력 시 적용되는 모든 규칙과 제약사항을 설명합니다.

## 🔤 텍스트 입력 규칙

### 일반 텍스트 필드

#### 문자 인코딩
- **지원 인코딩**: UTF-8
- **문자셋**: 유니코드 전체 지원
- **이모지**: ✅ 허용 (단, 제한적 사용 권장)

#### 공백 처리 규칙
```javascript
// 입력 전처리 규칙
1. 앞뒤 공백 제거 (trim)
2. 연속 공백을 단일 공백으로 변환
3. 탭 문자를 공백으로 변환
4. 줄바꿈 문자 처리 (필드별 상이)

// 예시
입력: "  프리미엄    티셔츠  "
결과: "프리미엄 티셔츠"
```

#### 특수문자 정책

=== "허용 특수문자"
    | 문자 | 용도 | 제한사항 |
    |------|------|----------|
    | `()` | 괄호 | 중첩 3단계까지 |
    | `[]` | 대괄호 | 옵션 표시용 |
    | `{}` | 중괄호 | 변수 표시용 |
    | `-` | 하이픈 | 연결 표시 |
    | `_` | 언더스코어 | ID 필드만 |
    | `.` | 마침표 | 문장 종료 |
    | `,` | 쉼표 | 구분자 |
    | `/` | 슬래시 | 경로 표시 |
    | `&` | 앤드 | 브랜드명만 |

=== "금지 특수문자"
    | 문자 | 이유 | 대체방안 |
    |------|------|----------|
    | `<>` | HTML 태그 방지 | 전각문자 ＜＞ |
    | `'"` | SQL 인젝션 방지 | 전각문자 ＇＂ |
    | `\|` | 파이프 문자 | 구분자 혼동 방지 |
    | `;` | SQL 구분자 | 명령어 혼동 방지 |

## 🔢 숫자 입력 규칙

### 가격 입력 규칙

#### 입력 형식
```javascript
// 허용 입력 형식
✅ 29000        // 숫자만
✅ 29,000       // 콤마 포함
✅ 29000원      // 단위 포함 (자동 제거)
✅ ₩29,000      // 통화 기호 포함

// 금지 입력 형식
❌ 29,000.50    // 소수점 (정수만 허용)
❌ 29K          // 단위 표기
❌ -29000       // 음수
❌ 29 000       // 공백 구분자
```

#### 자동 변환 규칙
```javascript
입력: "29000원"
처리 과정:
1. 단위 제거: "29000"
2. 숫자 검증: 29000
3. 범위 확인: 100 ≤ 29000 ≤ 99,999,999 ✅
4. 저장: 29000
5. 표시: "29,000원"
```

### 재고 입력 규칙

#### 소수점 처리
- **허용**: 정수만 (소수점 불허)
- **반올림**: 소수점 입력 시 자동 반올림
- **예시**: `10.7` 입력 → `11`로 저장

#### 대량 입력 지원
```javascript
// 대량 재고 입력 형식 지원
✅ 1000         // 기본
✅ 1,000        // 콤마 구분
✅ 1K           // K 단위 (1000으로 변환)
✅ 1.5K         // 1500으로 변환
❌ 1M           // 백만 단위 미지원
```

## 📅 날짜/시간 입력 규칙

### 날짜 형식 지원

#### 허용 날짜 형식
```javascript
// 입력 형식 (자동 인식)
"2024-01-15"     // ISO 형식 (권장)
"2024/01/15"     // 슬래시 구분
"2024.01.15"     // 점 구분
"20240115"       // 숫자만

// 한국어 형식
"2024년 1월 15일"
"24년 1월 15일"   // 2자리 연도
```

#### 시간 형식 지원
```javascript
// 시간 형식
"14:30"          // 24시간 형식 (권장)
"2:30PM"         // 12시간 형식
"14:30:00"       // 초 포함
"오후 2시 30분"   // 한국어 형식
```

### 유효성 검증
- **범위**: 1900-01-01 ~ 2099-12-31
- **윤년**: 자동 계산 및 검증
- **타임존**: KST (UTC+9) 기본

## 🖼️ 파일 업로드 규칙

### 이미지 파일 규칙

#### 지원 파일 형식
```javascript
const ALLOWED_FORMATS = {
  'image/jpeg': ['.jpg', '.jpeg'],
  'image/png': ['.png'],
  'image/webp': ['.webp'],
  'image/gif': ['.gif']  // 애니메이션 GIF 제한적 지원
}
```

#### 파일 크기 제한
| 용도 | 최대 크기 | 권장 크기 | 압축 |
|------|-----------|-----------|------|
| 상품 이미지 | 5MB | 1-2MB | 자동 |
| 썸네일 | 1MB | 100-300KB | 자동 |
| 로고 | 2MB | 50-100KB | 자동 |

#### 이미지 규격 권장사항
```javascript
// 권장 해상도
상품 메인 이미지: 800×800px (1:1 비율)
상품 상세 이미지: 800×600px (4:3 비율)
썸네일: 200×200px (1:1 비율)

// 최소 해상도
모든 이미지: 200×200px 이상
```

### 파일명 규칙
```javascript
// 허용 파일명 패턴
✅ product_001.jpg      // 영문, 숫자, 언더스코어
✅ 상품이미지.png        // 한글
✅ item-photo.jpeg      // 하이픈
✅ IMG_20240115.jpg     // 날짜 포함

// 금지 파일명 패턴
❌ product<1>.jpg       // 특수문자
❌ file?.png            // 물음표
❌ image|thumb.jpg      // 파이프
❌ .hiddenfile.jpg      // 숨김 파일
```

## 🏷️ 태그 및 라벨 입력 규칙

### 태그 입력 규칙

#### 태그 형식
```javascript
// 입력 방식
1. 쉼표로 구분: "태그1, 태그2, 태그3"
2. 엔터로 구분: "태그1\n태그2\n태그3"  
3. 세미콜론 구분: "태그1;태그2;태그3"

// 개별 태그 제한
최소 길이: 1자
최대 길이: 20자
최대 개수: 10개
허용 문자: 한글, 영문, 숫자, 하이픈
```

#### 자동 정규화
```javascript
입력: " 프리미엄 ,  코튼  , 티셔츠 "
처리 결과: ["프리미엄", "코튼", "티셔츠"]

// 처리 과정
1. 구분자로 분할
2. 각 태그 trim
3. 빈 태그 제거
4. 중복 제거
5. 길이 검증
```

## 🔍 검색 입력 규칙

### 검색어 처리

#### 검색어 전처리
```javascript
// 입력: "프리미엄    티셔츠  "
처리 과정:
1. 앞뒤 공백 제거
2. 연속 공백을 단일 공백으로 변환
3. 특수문자 이스케이프 처리
4. 최소 길이 검증 (2자 이상)

// 결과: "프리미엄 티셔츠"
```

#### 와일드카드 지원
```javascript
// 지원 패턴
*티셔츠     // 뒤 매칭
프리미엄*   // 앞 매칭  
*코튼*      // 부분 매칭

// 금지 패턴
**티셔츠    // 중복 와일드카드
?티셔츠     // 물음표 와일드카드
```

## ⚠️ 보안 관련 입력 규칙

### XSS 방지 규칙

#### HTML 태그 처리
```javascript
// 허용 태그 (화이트리스트)
const ALLOWED_TAGS = [
  'p', 'br', 'strong', 'em', 'u', 
  'ul', 'ol', 'li', 'h3', 'h4'
];

// 금지 태그 (자동 제거)
const BLOCKED_TAGS = [
  'script', 'iframe', 'object', 'embed',
  'form', 'input', 'button', 'link'
];
```

#### 스크립트 코드 차단
```javascript
// 차단 패턴
javascript:     // 자바스크립트 프로토콜
on[a-z]+\s*=   // 이벤트 핸들러 (onclick 등)
<script        // 스크립트 태그
eval\(         // eval 함수
```

### SQL 인젝션 방지
- **파라미터 바인딩**: 모든 DB 쿼리에서 파라미터 바인딩 사용
- **특수문자 이스케이프**: 자동으로 특수문자 이스케이프 처리
- **입력 길이 제한**: 비정상적으로 긴 입력 차단

## 📱 모바일 입력 지원

### 입력 타입별 키보드 최적화

#### 숫자 입력
```html
<input type="number" pattern="[0-9]*" />
<!-- 숫자 키패드 활성화 -->
```

#### 이메일 입력
```html
<input type="email" />
<!-- @ 키 포함 키보드 -->
```

#### 전화번호 입력
```html
<input type="tel" pattern="[0-9-]*" />
<!-- 전화 키패드 활성화 -->
```

### 터치 최적화
- **버튼 크기**: 최소 44×44px
- **입력 필드**: 최소 높이 48px
- **간격**: 요소 간 8px 이상

## 🌐 다국어 입력 지원

### 언어별 특수 처리

#### 한글 입력
```javascript
// 한글 조합 중 처리
- 조합 중인 문자는 검증에서 제외
- 완성된 문자만 길이 계산에 포함
- IME 상태 확인 후 처리
```

#### 영문 입력
```javascript
// 대소문자 처리
- ID 필드: 자동으로 소문자 변환
- 이름 필드: 첫 글자만 대문자 (옵션)
- 검색: 대소문자 구분 없음
```

## 🚨 에러 처리 규칙

### 실시간 검증
```javascript
// 검증 타이밍
onInput: 실시간 기본 검증 (길이, 형식)
onBlur: 상세 검증 (비즈니스 룰)
onSubmit: 최종 검증 (서버 검증)
```

### 에러 메시지 표준
```javascript
// 에러 메시지 형식
"[필드명]은(는) [규칙]이어야 합니다."

예시:
"상품명은 2자 이상 100자 이하여야 합니다."
"가격은 100원 이상이어야 합니다."
"이미지는 5MB 이하여야 합니다."
```

!!! tip "입력 효율성 팁"
    - **자동완성**: 이전 입력 기록 기반 자동완성 제공
    - **템플릿**: 자주 사용하는 입력 패턴 템플릿 제공
    - **일괄 입력**: CSV/Excel 파일을 통한 대량 데이터 입력 지원
    - **실행 취소**: Ctrl+Z 를 통한 입력 실행 취소 (최대 10단계)

!!! warning "주의사항"
    - 모든 입력은 클라이언트와 서버에서 이중 검증됩니다
    - 보안상 중요한 데이터는 추가 암호화가 적용됩니다
    - API를 통한 입력도 동일한 규칙이 적용됩니다
